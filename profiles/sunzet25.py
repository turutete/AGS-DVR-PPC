build_base_dir   = 'build'
install_base_dir = 'install'
mod_prefix       = 'ags-'
lmod_prefix      = 'lua-'

all_modules = {
	'sds':	{
		'target_dir':		'/sds/',
		'lib_install_dir':	'/lib/',
		'mod_install_dir':	'/lib/ags/',
		'bin_install_dir':	'/bin/',
		'mod_prefix':		mod_prefix,
		'modules':	{
			'agssds':	{
				'name':		'agssds',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ags-sds.gob' ],
				'sources_fn':	[ 'ags-sds.c', 'accessif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'agstype':	{
				'name':		'agstype',
				'do_sstatic':	True,
				'sources_fn':	[ 'ags-type.c', 'ags-valuetypes.c', 'ags-paramspecs.c', 'ags-valuetransform.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'agssdsx':	{
				'name':		'agssdsx',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ags-sdsx.gob' ],
				'sources_fn':	[ 'ags-sdsx.c', 'accessxif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'net-snmp-config --libs --cflags' ],
			},
			'agssdscore':	{
				'name':		'agssdscore',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ags-sdscore.gob' ],
				'sources_fn':	[ 'ags-sdscore.c', 'createif.c', 'limitsif.c', 'trapif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'sdscoreglib':	{
				'name':		'sdscoreglib',
				'do_sstatic':	True,
				'gobs_fn':	[ 'sdscore-glib.gob' ],
				'sources_fn':	[ 'sdscore-glib.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'net-snmp-config --libs --cflags' ],
			},
			'snmpcommon':	{
				'name':		'snmpcommon',
				'do_sstatic':	True,
				'sources_fn':	[ 'snmp-gvalue.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'net-snmp-config --libs --cflags' ],
			},
			'sdsxsnmp':		{
				'name':		'sdsxsnmp',
				'do_sstatic':	True,
				'gobs_fn':	[ 'sdsx-snmp.gob' ],
				'sources_fn':	[ 'sdsx-snmp.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'net-snmp-config --libs --cflags' ],
			},
		},
	},
	'gw':		{
		'target_dir':		'/gw/',
		'lib_install_dir':	'/lib/',
		'mod_install_dir':	'/lib/ags/',
		'bin_install_dir':	'/bin/',
		'mod_prefix':		mod_prefix,
		'modules':	{
			'agsgw':	{
				'name':		'agsgw',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ags-gw.gob' ],
				'sources_fn':	[ 'ags-gw.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'gwsnmp':	{
				'name':		'gwsnmp',
				'do_sstatic':	True,
				'gobs_fn':	[ 'gw-snmp.gob' ],
				'sources_fn':	[ 'gw-snmp.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'net-snmp-config --agent-libs' ],
			},
		},
	},
	'cm':		{
		'target_dir':		'/cm/',
		'lib_install_dir':	'/lib/',
		'mod_install_dir':	'/lib/ags/',
		'bin_install_dir':	'/bin/',
		'mod_prefix':		mod_prefix,
		'modules':	{
			'agscm':	{
				'name':		'agscm',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ags-cm.gob' ],
				'sources_fn':	[ 'ags-cm.c', 'interpreterif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmserveronly':	{
				'name':		'cmserveronly',
				'do_sstatic':	True,
				'sources_fn':	[ 'busif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmmibinit':	{
				'name':		'cmmibinit',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-mibinit.gob' ],
				'sources_fn':	[ 'cm-mibinit.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'net-snmp-config --libs --cflags' ],
			},
			'cmtextbuffer':	{
				'name':		'cmtextbuffer',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-textbuffer.gob' ],
				'sources_fn':	[ 'cm-textbuffer.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmzigorbus':	{
				'name':		'cmzigorbus',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-zigorbus.gob' ],
				'sources_fn':	[ 'cm-zigorbus.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmzigorobj':	{
				'name':		'cmzigorobj',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-zigorobj.gob' ],
				'sources_fn':	[ 'cm-zigorobj.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmzigormng':	{
				'name':		'cmzigormng',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-zigormng.gob' ],
				'sources_fn':	[ 'cm-zigormng.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmscript':	{
				'name':		'cmscript',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-script.gob' ],
				'sources_fn':	[ 'cm-script.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmctrlsunzet':	{
				'name':		'cmctrlsunzet',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-ctrl-sunzet.gob' ],
				'sources_fn':	[ 'cm-ctrl-sunzet.c', 'sz_maniobra.c', 'sz_ventiladores.c', 'sz_AGS.c', 'spa.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmwatchdog':	{
				'name':		'cmwatchdog',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-watchdog.gob' ],
				'sources_fn':	[ 'cm-watchdog.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmi7017':	{
				'name':		'cmi7017',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-i7017.gob' ],
				'sources_fn':	[ 'cm-i7017.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmmodem':	{
				'name':		'cmmodem',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-modem.gob' ],
				'sources_fn':	[ 'cm-modem.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cmstrings':	{
				'name':		'cmstrings',
				'do_sstatic':	True,
				'gobs_fn':	[ 'cm-strings.gob' ],
				'sources_fn':	[ 'cm-strings.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
		},
	},
	'cf':		{
		'target_dir':		'/cf/',
		'lib_install_dir':	'/lib/',
		'mod_install_dir':	'/lib/ags/',
		'bin_install_dir':	'/bin/',
		'mod_prefix':		mod_prefix,
		'modules':	{
			'agscf':	{
				'name':		'agscf',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ags-cf.gob' ],
				'sources_fn':	[ 'ags-cf.c', 'configif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'cflua':	{
				'name':		'cflua',
				'do_mod':	True,
				'gobs_fn':	[ 'cf-lua.gob' ],
				'sources_fn':	[ 'cf-lua.c', 'lua-gvalue.c' ],
				'libs':		[ 'sunzetcommon' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --cflags --libs lua' ],
			},
		},
	},
	'ui':		{
		'target_dir':		'/ui/',
		'lib_install_dir':	'/lib/',
		'mod_install_dir':	'/lib/ags/',
		'bin_install_dir':	'/bin/',
		'mod_prefix':		mod_prefix,
		'modules':	{
			'textbufferif':	{
				'name':		'textbufferif',
				'do_sstatic':	True,
				'sources_fn':	[ 'textbufferif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'agsui':	{
				'name':		'agsui',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ags-ui.gob' ],
				'sources_fn':	[ 'ags-ui.c', 'treestoreif.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
			},
			'uigtk2':	{
				'name':		'uigtk2',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ui-gtk2.gob' ],
				'sources_fn':	[ 'ui-gtk2.c' ],
				'pc':		[ 'pkg-config --libs --cflags gtk+-2.0' ],
			},
			'gtk2gladelo':	{
				'name':		'gtk2gladelo',
				'do_sstatic':	True,
				'gobs_fn':	[ 'gtk2-gladelo.gob' ],
				'sources_fn':	[ 'gtk2-gladelo.c' ],
				'pc':		[ 'pkg-config --libs --cflags libglade-2.0' ],
			},
			'gtk2pixbufs':	{
				'name':		'gtk2pixbufs',
				'do_sstatic':	True,
				'gobs_fn':	[ 'gtk2-pixbufs.gob' ],
				'sources_fn':	[ 'gtk2-pixbufs.c' ],
				'pc':		[ 'pkg-config --libs --cflags gdk-pixbuf-2.0' ],
			},
			'gtk2treestore':	{
				'name':		'gtk2treestore',
				'do_sstatic':	True,
				'gobs_fn':	[ 'gtk2-treestore.gob' ],
				'sources_fn':	[ 'gtk2-treestore.c' ],
				'pc':		[ 'pkg-config --libs --cflags gtk+-2.0' ],
			},
			'xml2tslibxml2':	{
				'name':		'xml2tslibxml2',
				'do_sstatic':	True,
				'gobs_fn':	[ 'xml2ts-libxml2.gob' ],
				'sources_fn':	[ 'xml2ts-libxml2.c' ],
				'pc':		[ 'pkg-config --libs --cflags gdk-pixbuf-2.0', 'pkg-config --libs --cflags libxml-2.0' ],
			},
			'pollglib':	{
				'name':		'pollglib',
				'do_sstatic':	True,
				'gobs_fn':	[ 'poll-glib.gob' ],
				'sources_fn':	[ 'poll-glib.c' ],
				'pc':		[ 'pkg-config --libs --cflags gtk+-2.0' ],
			},
			'gtk2treeview':	{
				'name':		'gtk2treeview',
				'do_sstatic':	True,
				'gobs_fn':	[ 'gtk2-treeview.gob' ],
				'sources_fn':	[ 'gtk2-treeview.c' ],
				'pc':		[ 'pkg-config --libs --cflags gtk+-2.0' ],
			},
			'gtk2keysnooper':	{
				'name':		'gtk2keysnooper',
				'do_sstatic':	True,
				'gobs_fn':	[ 'gtk2-keysnooper.gob' ],
				'sources_fn':	[ 'gtk2-keysnooper.c' ],
				'pc':		[ 'pkg-config --libs --cflags gtk+-2.0' ],
			},
			'uicurses':	{
				'name':		'uicurses',
				'do_sstatic':	True,
				'gobs_fn':	[ 'ui-curses.gob' ],
				'sources_fn':	[ 'ui-curses.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],				
			},
		},
	},
	'lualib':	{
		'target_dir':		'/lualib/',
		'lib_install_dir':	'/lib/',
		'mod_install_dir':	'/lib/lua/',
		'bin_install_dir':	'/bin/',
		'mod_prefix':		lmod_prefix,
		'modules':	{
			'gobject':	{
				'name':		'gobject',
				'do_mod':	True,
				'sources_fn':	[ 'lgobject.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'config':	{
				'name':		'config',
				'do_mod':	True,
				'sources_fn':	[ 'lconfig.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'textbuffer':	{
				'name':		'textbuffer',
				'do_mod':	True,
				'sources_fn':	[ 'ltextbuffer.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'treestore':	{
				'name':		'treestore',
				'do_mod':	True,
				'sources_fn':	[ 'ltreestore.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'bus':	{
				'name':		'bus',
				'do_mod':	True,
				'sources_fn':	[ 'lbus.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'access':	{
				'name':		'access',
				'do_mod':	True,
				'sources_fn':	[ 'laccess.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'gdk':	{
				'name':		'gdk',
				'do_mod':	True,
				'sources_fn':	[ 'lgdk.c' ],
				'pc':		[ 'pkg-config --libs --cflags gtk+-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'curses':	{
				'name':		'curses',
				'do_mod':	True,
				'sources_fn':	[ 'lcurses.c' ],
				'libs':		[ 'curses' ],
				'pc':		[ 'pkg-config --libs --cflags lua' ],
			},
			'accessx':	{
				'name':		'accessx',
				'do_mod':	True,
				'sources_fn':	[ 'laccessx.c' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'gtk':		{
				'name':		'gtk',
				'do_mod':	True,
				'sources_fn':	[ 'lgtk.c' ],
				'pc':		[ 'pkg-config --libs --cflags gtk+-2.0', 'pkg-config --libs --cflags lua' ],
			},
			'bit':		{
				'name':		'bit',
				'do_mod':	True,
				'sources_fn':	[ 'lbit.c' ],
				'pc':		[ 'pkg-config --libs --cflags lua' ],
			},
		},
		
	},
	'tests':	{
		'target_dir':		'/tests/',
		'lib_install_dir':	'/lib/',
		'mod_install_dir':	'/lib/ags/',
		'bin_install_dir':	'/bin/',
		'mod_prefix':		mod_prefix,
		'modules':	{
			'sunzetcommon':	{
				'name':		'sunzetcommon',
				'do_shared':	True,
				'slibs':	[ 'agscf', 'agstype', 'agscm', 'agssds', 'agssdsx', 'snmpcommon', 'textbufferif', 'cmscript', 'cmtextbuffer', 'cmwatchdog' ],
				'sources_fn':	[],
				'pc':		[ 'net-snmp-config --libs --cflags' ],
			},
			'sunzetserver':	{
				'name':		'sunzetserver',
				'do_mod':	True,
				'slibs':	[ 'agssdscore', 'sdscoreglib', 'cmserveronly', 'cmmibinit', 'agsgw', 'gwsnmp', 'cmzigorbus', 'cmzigorobj', 'cmzigormng', 'cmctrlsunzet', ],
				'sources_fn':	[],
				'pc':		[ 'net-snmp-config --agent-libs' ],
			},
			'sunzetclient':	{
				'name':		'sunzetclient',
				'do_shared':	True,
				'slibs':	[ 'agsui', 'xml2tslibxml2', 'pollglib', 'sdsxsnmp', ],
				'sources_fn':	[],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags libxml-2.0', 'pkg-config --libs --cflags gdk-pixbuf-2.0' ],
			},
			'sunzetgtk2':		{
				'name':		'sunzetgtk2',
				'do_mod':	True,
				'libs':		[ 'sunzetclient' ],
				'slibs':	[ 'uigtk2', 'gtk2gladelo', 'gtk2pixbufs', 'gtk2treestore', 'gtk2treeview', 'gtk2keysnooper' ],
				'pc':		[ 'pkg-config --libs --cflags libglade-2.0' ],
				'sources_fn':	[],
			},
			'sunzetcurses':	{
				'name':		'sunzetcurses',
				'do_mod':	True,
				'libs':		[ 'sunzetclient', 'curses' ],
				'slibs':	[ 'uicurses' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
				'sources_fn':	[],
			},
			'sunzeti7017':	{
				'name':		'sunzeti7017',
				'do_mod':	True,
				'libs':		[ 'sunzetclient' ],
				'slibs':	[ 'cmi7017' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
				'sources_fn':	[],
			},
			'sunzetmodem':	{
				'name':		'sunzetmodem',
				'do_mod':	True,
				'libs':		[ 'sunzetclient' ],
				'slibs':	[ 'cmmodem' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
				'sources_fn':	[],
			},
			'sunzetstrings':	{
				'name':		'sunzetstrings',
				'do_mod':	True,
				'libs':		[ 'sunzetclient' ],
				'slibs':	[ 'cmstrings' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0' ],
				'sources_fn':	[],
			},
			'sunzet':		{
				'name':		'sunzet',
				'do_bin':	True,
				'sources_fn':	[ 'test-mods.c' ],
				'libs':		[ 'sunzetcommon' ],
				'pc':		[ 'pkg-config --libs --cflags gobject-2.0', 'pkg-config --libs --cflags gmodule-2.0' ],
			},
		},
	},
}

all_data = {
	'config':	{
		'config_install_dir':	'/share/config/',
		'data_fn':			[ 'functions.lua',
						[ 'sunzet25-snmpd.lua', 'config.lua','setup.lua','sunzet25-snmpd.lua' ],
						'defs-sunzet.lua', 'objs-sunzet.lua', 'oids-zigor.lua', 'oids-sunzet.lua',
						'oids-parameter.lua', 'script-gtk2ui-sunzet25.lua',
						[ 'sunzet25-gtk2ui.lua', 'config.lua','setup.lua','sunzet25-gtk2ui.lua' ],
						'script-snmpd-sunzet25.lua', 'parameter.lua', 'active-sunzet.lua',
						'factory-sunzet25.lua', 'snmpd_conf-sunzet.lua', 'mgetty_config.lua', 'net.lua',
						[ 'sunzet25-curs2x16.lua', 'config.lua','setup.lua','sunzet25-curs2x16.lua' ],
						'script-curs2x16-sunzet25.lua', 'storetable.lua', 'treestore.lua', 'oids-alarm.lua',
						'oids-alarm-log.lua', 'edit.lua', 'alarmtable.lua', 'alarmlogtable.lua',
						'alarms-sunzet.lua', 'displays-sunzet25.lua', 'alarmlog-sunzet.lua', 'zonas-sunzet.lua',
						[ 'sunzet-i7017.lua', 'config.lua','setup.lua','sunzet-i7017.lua' ],
						[ 'sunzet-modem.lua', 'config.lua','setup.lua','sunzet-modem.lua' ],
						[ 'sunzet-strings.lua', 'config.lua','setup.lua','sunzet-strings.lua' ],
						'gtk.lua', 'persist-ecounters-sunzet.lua', 'config-edit-sunzet.lua', ],
	},
	'ui':	{
		'config_install_dir':	'/share/ui/',
		'data_fn':			[ 'ui-sunzet25-1.lxml', 'ui-sunzet25-2.lxml', 'ui-sunzet25-3.lxml', 'ui-sunzet25-4.lxml', 'ui-sunzet.glade', ],
	},
	'pixbufs':	{
		'config_install_dir':	'/share/pixbufs/',
		'data_fn':			[ 'redball.xpm', 'greenball.xpm', 'grayball.xpm', 'zigor_p.xpm', 'tree_sis.xpm', 'redbell.xpm', 'greenbell.xpm', 'orangebell.xpm', 'yellowbell.xpm', "Actuacion.xpm", "Alarmas.xpm", "ArranqueParo.xpm", "Calibracion.xpm", "Contadores.xpm", "DSP.xpm", "EntradaFV.xpm", "Estado.xpm", "Red.xpm", "Temperatura.xpm", "Ventiladores.xpm", "String.xpm", ],
	},
	'mibs':	{
		'config_install_dir':	'/share/mibs/',
		'data_fn':			[ 'ZIGOR-SMI.txt', 'ZIGOR-TC.txt', 'ZIGOR-PRODUCTS-MIB.txt', 'ZIGOR-SUNZET-MIB.txt', 'ZIGOR-PARAMETER-MIB.txt', 'ZIGOR-ALARM-MIB.txt', 'ZIGOR-ALARM-LOG-MIB.txt', 'ZIGOR-STATUS-MIB.txt' ],
	},
}

def f(env):
	return
